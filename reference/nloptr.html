<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>R interface to NLopt — nloptr • nloptr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="R interface to NLopt — nloptr" />
<meta property="og:description" content="nloptr is an R interface to NLopt, a free/open-source library for nonlinear
optimization started by Steven G. Johnson, providing a common interface for
a number of different free optimization routines available online as well as
original implementations of various other algorithms. The NLopt library is
available under the GNU Lesser General Public License (LGPL), and the
copyrights are owned by a variety of authors. Most of the information here
has been taken from the NLopt website,
where more details are available." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nloptr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/nloptr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>R interface to NLopt</h1>
    
    <div class="hidden name"><code>nloptr.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>nloptr is an R interface to NLopt, a free/open-source library for nonlinear
optimization started by Steven G. Johnson, providing a common interface for
a number of different free optimization routines available online as well as
original implementations of various other algorithms. The NLopt library is
available under the GNU Lesser General Public License (LGPL), and the
copyrights are owned by a variety of authors. Most of the information here
has been taken from <a href='https://nlopt.readthedocs.io/en/latest/'>the NLopt website</a>,
where more details are available.</p>
    </div>

    <pre class="usage"><span class='fu'>nloptr</span><span class='op'>(</span>
  <span class='va'>x0</span>,
  <span class='va'>eval_f</span>,
  eval_grad_f <span class='op'>=</span> <span class='cn'>NULL</span>,
  lb <span class='op'>=</span> <span class='cn'>NULL</span>,
  ub <span class='op'>=</span> <span class='cn'>NULL</span>,
  eval_g_ineq <span class='op'>=</span> <span class='cn'>NULL</span>,
  eval_jac_g_ineq <span class='op'>=</span> <span class='cn'>NULL</span>,
  eval_g_eq <span class='op'>=</span> <span class='cn'>NULL</span>,
  eval_jac_g_eq <span class='op'>=</span> <span class='cn'>NULL</span>,
  opts <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x0</th>
      <td><p>vector with starting values for the optimization.</p></td>
    </tr>
    <tr>
      <th>eval_f</th>
      <td><p>function that returns the value of the objective function. It
can also return gradient information at the same time in a list with
elements "objective" and "gradient" (see below for an example).</p></td>
    </tr>
    <tr>
      <th>eval_grad_f</th>
      <td><p>function that returns the value of the gradient of the
objective function. Not all of the algorithms require a gradient.</p></td>
    </tr>
    <tr>
      <th>lb</th>
      <td><p>vector with lower bounds of the controls (use -Inf for controls
without lower bound), by default there are no lower bounds for any of the
controls.</p></td>
    </tr>
    <tr>
      <th>ub</th>
      <td><p>vector with upper bounds of the controls (use Inf for controls
without upper bound), by default there are no upper bounds for any of the
controls.</p></td>
    </tr>
    <tr>
      <th>eval_g_ineq</th>
      <td><p>function to evaluate (non-)linear inequality constraints
that should hold in the solution.  It can also return gradient information
at the same time in a list with elements "constraints" and "jacobian" (see
below for an example).</p></td>
    </tr>
    <tr>
      <th>eval_jac_g_ineq</th>
      <td><p>function to evaluate the jacobian of the (non-)linear
inequality constraints that should hold in the solution.</p></td>
    </tr>
    <tr>
      <th>eval_g_eq</th>
      <td><p>function to evaluate (non-)linear equality constraints that
should hold in the solution.  It can also return gradient information at the
same time in a list with elements "constraints" and "jacobian" (see below for
an example).</p></td>
    </tr>
    <tr>
      <th>eval_jac_g_eq</th>
      <td><p>function to evaluate the jacobian of the (non-)linear
equality constraints that should hold in the solution.</p></td>
    </tr>
    <tr>
      <th>opts</th>
      <td><p>list with options. The option "algorithm" is required. Check the
<a href='https://nlopt.readthedocs.io/en/latest/NLopt_Algorithms/'>NLopt website</a>
for a full list of available algorithms. Other options control the
termination conditions (minf_max, ftol_rel, ftol_abs, xtol_rel, xtol_abs,
maxeval, maxtime). Default is xtol_rel = 1e-4. More information
<a href='https://nlopt.readthedocs.io/en/latest/NLopt_Introduction/#termination-conditions'>here</a>.
A full description of all options is shown by the function
<code><a href='nloptr.print.options.html'>nloptr.print.options()</a></code>.</p>
<p>Some algorithms with equality constraints require the option local_opts,
which contains a list with an algorithm and a termination condition for the
local algorithm. See ?<code>nloptr-package</code> for an example.</p>
<p>The option print_level controls how much output is shown during the
optimization process. Possible values:</p><table class='table'>
<tr><td>0 (default)</td><td>no
output</td></tr>
<tr><td>1</td><td>show iteration number and value of objective function</td></tr>
<tr><td>2</td><td>1 + show value of (in)equalities</td></tr>
<tr><td>3</td><td>2 + show value of
controls</td></tr>
</table>


<p>The option check_derivatives (default = FALSE) can be used to run to compare
the analytic gradients with finite difference approximations.  The option
check_derivatives_print ('all' (default), 'errors', 'none') controls the
output of the derivative checker, if it is run, showing all comparisons,
only those that resulted in an error, or none.  The option
check_derivatives_tol (default = 1e-04), determines when a difference
between an analytic gradient and its finite difference approximation is
flagged as an error.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>arguments that will be passed to the user-defined objective and
constraints functions.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The return value contains a list with the inputs, and additional
elements</p>
<dt>call</dt><dd><p>the call that was made to solve</p></dd>
<dt>status</dt><dd><p>integer value with the status of the optimization (0 is
success)</p></dd>
<dt>message</dt><dd><p>more informative message with the status of the optimization</p></dd>
<dt>iterations</dt><dd><p>number of iterations that were executed</p></dd>
<dt>objective</dt><dd><p>value if the objective function in the solution</p></dd>
<dt>solution</dt><dd><p>optimal value of the controls</p></dd>
<dt>version</dt><dd><p>version of NLopt that was used</p></dd>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>NLopt addresses general nonlinear optimization problems of the form:</p>
<p>min f(x) x in R^n</p>
<p>s.t.  g(x) &lt;= 0 h(x) = 0 lb &lt;= x &lt;= ub</p>
<p>where f is the objective function to be minimized and x represents the n
optimization parameters. This problem may optionally be subject to the bound
constraints (also called box constraints), lb and ub. For partially or
totally unconstrained problems the bounds can take -Inf or Inf. One may also
optionally have m nonlinear inequality constraints (sometimes called a
nonlinear programming problem), which can be specified in g(x), and equality
constraints that can be specified in h(x). Note that not all of the
algorithms in NLopt can handle constraints.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>See ?<code>nloptr-package</code> for an extended example.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Steven G. Johnson, The NLopt nonlinear-optimization package,
<a href='https://nlopt.readthedocs.io/en/latest/'>https://nlopt.readthedocs.io/en/latest/</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='nloptr.print.options.html'>nloptr.print.options</a></code>
<code><a href='check.derivatives.html'>check.derivatives</a></code>
<code><a href='https://rdrr.io/r/stats/optim.html'>optim</a></code>
<code><a href='https://rdrr.io/r/stats/nlm.html'>nlm</a></code>
<code><a href='https://rdrr.io/r/stats/nlminb.html'>nlminb</a></code>
<code>Rsolnp::Rsolnp</code>
<code>Rsolnp::solnp</code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Steven G. Johnson and others (C code) <br /> Jelmer Ypma (R interface)</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'></span>
<span class='r-in'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'>'nloptr'</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## Rosenbrock Banana function and gradient in separate functions</span></span>
<span class='r-in'><span class='va'>eval_f</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'>    <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span> <span class='fl'>100</span> <span class='op'>*</span> <span class='op'>(</span><span class='va'>x</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span> <span class='op'>-</span> <span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>*</span> <span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span><span class='op'>^</span><span class='fl'>2</span> <span class='op'>+</span> <span class='op'>(</span><span class='fl'>1</span> <span class='op'>-</span> <span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span><span class='op'>^</span><span class='fl'>2</span> <span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='va'>eval_grad_f</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'>    <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span> <span class='op'>-</span><span class='fl'>400</span> <span class='op'>*</span> <span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>*</span> <span class='op'>(</span><span class='va'>x</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span> <span class='op'>-</span> <span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>*</span> <span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span> <span class='op'>-</span> <span class='fl'>2</span> <span class='op'>*</span> <span class='op'>(</span><span class='fl'>1</span> <span class='op'>-</span> <span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>,</span>
<span class='r-in'>                <span class='fl'>200</span> <span class='op'>*</span> <span class='op'>(</span><span class='va'>x</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span> <span class='op'>-</span> <span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>*</span> <span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-in'></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># initial values</span></span>
<span class='r-in'><span class='va'>x0</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span> <span class='op'>-</span><span class='fl'>1.2</span>, <span class='fl'>1</span> <span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='va'>opts</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='st'>"algorithm"</span><span class='op'>=</span><span class='st'>"NLOPT_LD_LBFGS"</span>,</span>
<span class='r-in'>             <span class='st'>"xtol_rel"</span><span class='op'>=</span><span class='fl'>1.0e-8</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># solve Rosenbrock Banana function</span></span>
<span class='r-in'><span class='va'>res</span> <span class='op'>&lt;-</span> <span class='fu'>nloptr</span><span class='op'>(</span> x0<span class='op'>=</span><span class='va'>x0</span>,</span>
<span class='r-in'>               eval_f<span class='op'>=</span><span class='va'>eval_f</span>,</span>
<span class='r-in'>               eval_grad_f<span class='op'>=</span><span class='va'>eval_grad_f</span>,</span>
<span class='r-in'>               opts<span class='op'>=</span><span class='va'>opts</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span> <span class='va'>res</span> <span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Call:</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> nloptr(x0 = x0, eval_f = eval_f, eval_grad_f = eval_grad_f, opts = opts)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Minimization using NLopt version 2.7.0 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> NLopt solver status: 1 ( NLOPT_SUCCESS: Generic success return value. )</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Number of Iterations....: 56 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Termination conditions:  xtol_rel: 1e-08 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Number of inequality constraints:  0 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Number of equality constraints:    0 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Optimal value of objective function:  7.35727226897802e-23 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Optimal value of controls: 1 1</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-in'></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## Rosenbrock Banana function and gradient in one function</span></span>
<span class='r-in'><span class='co'># this can be used to economize on calculations</span></span>
<span class='r-in'><span class='va'>eval_f_list</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'>    <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span> <span class='st'>"objective"</span> <span class='op'>=</span> <span class='fl'>100</span> <span class='op'>*</span> <span class='op'>(</span><span class='va'>x</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span> <span class='op'>-</span> <span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>*</span> <span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span><span class='op'>^</span><span class='fl'>2</span> <span class='op'>+</span> <span class='op'>(</span><span class='fl'>1</span> <span class='op'>-</span> <span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span><span class='op'>^</span><span class='fl'>2</span>,</span>
<span class='r-in'>                  <span class='st'>"gradient"</span>  <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span> <span class='op'>-</span><span class='fl'>400</span> <span class='op'>*</span> <span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>*</span> <span class='op'>(</span><span class='va'>x</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span> <span class='op'>-</span> <span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>*</span> <span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span> <span class='op'>-</span> <span class='fl'>2</span> <span class='op'>*</span> <span class='op'>(</span><span class='fl'>1</span> <span class='op'>-</span> <span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>,</span>
<span class='r-in'>                                    <span class='fl'>200</span> <span class='op'>*</span> <span class='op'>(</span><span class='va'>x</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span> <span class='op'>-</span> <span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>*</span> <span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>)</span> <span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># solve Rosenbrock Banana function using an objective function that</span></span>
<span class='r-in'><span class='co'># returns a list with the objective value and its gradient</span></span>
<span class='r-in'><span class='va'>res</span> <span class='op'>&lt;-</span> <span class='fu'>nloptr</span><span class='op'>(</span> x0<span class='op'>=</span><span class='va'>x0</span>,</span>
<span class='r-in'>               eval_f<span class='op'>=</span><span class='va'>eval_f_list</span>,</span>
<span class='r-in'>               opts<span class='op'>=</span><span class='va'>opts</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span> <span class='va'>res</span> <span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Call:</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> nloptr(x0 = x0, eval_f = eval_f_list, opts = opts)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Minimization using NLopt version 2.7.0 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> NLopt solver status: 1 ( NLOPT_SUCCESS: Generic success return value. )</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Number of Iterations....: 56 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Termination conditions:  xtol_rel: 1e-08 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Number of inequality constraints:  0 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Number of equality constraints:    0 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Optimal value of objective function:  7.35727226897802e-23 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Optimal value of controls: 1 1</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-in'></span>
<span class='r-in'></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Example showing how to solve the problem from the NLopt tutorial.</span></span>
<span class='r-in'><span class='co'>#</span></span>
<span class='r-in'><span class='co'># min sqrt( x2 )</span></span>
<span class='r-in'><span class='co'># s.t. x2 &gt;= 0</span></span>
<span class='r-in'><span class='co'>#      x2 &gt;= ( a1*x1 + b1 )^3</span></span>
<span class='r-in'><span class='co'>#      x2 &gt;= ( a2*x1 + b2 )^3</span></span>
<span class='r-in'><span class='co'># where</span></span>
<span class='r-in'><span class='co'># a1 = 2, b1 = 0, a2 = -1, b2 = 1</span></span>
<span class='r-in'><span class='co'>#</span></span>
<span class='r-in'><span class='co'># re-formulate constraints to be of form g(x) &lt;= 0</span></span>
<span class='r-in'><span class='co'>#      ( a1*x1 + b1 )^3 - x2 &lt;= 0</span></span>
<span class='r-in'><span class='co'>#      ( a2*x1 + b2 )^3 - x2 &lt;= 0</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'>'nloptr'</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># objective function</span></span>
<span class='r-in'><span class='va'>eval_f0</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span> <span class='va'>x</span>, <span class='va'>a</span>, <span class='va'>b</span> <span class='op'>)</span><span class='op'>{</span></span>
<span class='r-in'>    <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span> <span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># constraint function</span></span>
<span class='r-in'><span class='va'>eval_g0</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span> <span class='va'>x</span>, <span class='va'>a</span>, <span class='va'>b</span> <span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'>    <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span> <span class='op'>(</span><span class='va'>a</span><span class='op'>*</span><span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>+</span> <span class='va'>b</span><span class='op'>)</span><span class='op'>^</span><span class='fl'>3</span> <span class='op'>-</span> <span class='va'>x</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span> <span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># gradient of objective function</span></span>
<span class='r-in'><span class='va'>eval_grad_f0</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span> <span class='va'>x</span>, <span class='va'>a</span>, <span class='va'>b</span> <span class='op'>)</span><span class='op'>{</span></span>
<span class='r-in'>    <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span> <span class='fl'>0</span>, <span class='fl'>.5</span><span class='op'>/</span><span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span> <span class='op'>)</span> <span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># jacobian of constraint</span></span>
<span class='r-in'><span class='va'>eval_jac_g0</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span> <span class='va'>x</span>, <span class='va'>a</span>, <span class='va'>b</span> <span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'>    <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span> <span class='fl'>3</span><span class='op'>*</span><span class='va'>a</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>*</span><span class='op'>(</span><span class='va'>a</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>*</span><span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>+</span> <span class='va'>b</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span><span class='op'>^</span><span class='fl'>2</span>, <span class='op'>-</span><span class='fl'>1.0</span> <span class='op'>)</span>,</span>
<span class='r-in'>                   <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span> <span class='fl'>3</span><span class='op'>*</span><span class='va'>a</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>*</span><span class='op'>(</span><span class='va'>a</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>*</span><span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>+</span> <span class='va'>b</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span><span class='op'>^</span><span class='fl'>2</span>, <span class='op'>-</span><span class='fl'>1.0</span> <span class='op'>)</span> <span class='op'>)</span> <span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-in'></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># functions with gradients in objective and constraint function</span></span>
<span class='r-in'><span class='co'># this can be useful if the same calculations are needed for</span></span>
<span class='r-in'><span class='co'># the function value and the gradient</span></span>
<span class='r-in'><span class='va'>eval_f1</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span> <span class='va'>x</span>, <span class='va'>a</span>, <span class='va'>b</span> <span class='op'>)</span><span class='op'>{</span></span>
<span class='r-in'>    <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='st'>"objective"</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span>,</span>
<span class='r-in'>                 <span class='st'>"gradient"</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>.5</span><span class='op'>/</span><span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>)</span> <span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='va'>eval_g1</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span> <span class='va'>x</span>, <span class='va'>a</span>, <span class='va'>b</span> <span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'>    <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span> <span class='st'>"constraints"</span><span class='op'>=</span><span class='op'>(</span><span class='va'>a</span><span class='op'>*</span><span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>+</span> <span class='va'>b</span><span class='op'>)</span><span class='op'>^</span><span class='fl'>3</span> <span class='op'>-</span> <span class='va'>x</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span>,</span>
<span class='r-in'>                  <span class='st'>"jacobian"</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span> <span class='fl'>3</span><span class='op'>*</span><span class='va'>a</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>*</span><span class='op'>(</span><span class='va'>a</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>*</span><span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>+</span> <span class='va'>b</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span><span class='op'>^</span><span class='fl'>2</span>, <span class='op'>-</span><span class='fl'>1.0</span> <span class='op'>)</span>,</span>
<span class='r-in'>                                    <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span> <span class='fl'>3</span><span class='op'>*</span><span class='va'>a</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>*</span><span class='op'>(</span><span class='va'>a</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>*</span><span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>+</span> <span class='va'>b</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span><span class='op'>^</span><span class='fl'>2</span>, <span class='op'>-</span><span class='fl'>1.0</span> <span class='op'>)</span> <span class='op'>)</span> <span class='op'>)</span> <span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-in'></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># define parameters</span></span>
<span class='r-in'><span class='va'>a</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='op'>-</span><span class='fl'>1</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>b</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>1</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Solve using NLOPT_LD_MMA with gradient information supplied in separate function</span></span>
<span class='r-in'><span class='va'>res0</span> <span class='op'>&lt;-</span> <span class='fu'>nloptr</span><span class='op'>(</span> x0<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1.234</span>,<span class='fl'>5.678</span><span class='op'>)</span>,</span>
<span class='r-in'>                eval_f<span class='op'>=</span><span class='va'>eval_f0</span>,</span>
<span class='r-in'>                eval_grad_f<span class='op'>=</span><span class='va'>eval_grad_f0</span>,</span>
<span class='r-in'>                lb <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='cn'>Inf</span>,<span class='fl'>0</span><span class='op'>)</span>,</span>
<span class='r-in'>                ub <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>Inf</span>,<span class='cn'>Inf</span><span class='op'>)</span>,</span>
<span class='r-in'>                eval_g_ineq <span class='op'>=</span> <span class='va'>eval_g0</span>,</span>
<span class='r-in'>                eval_jac_g_ineq <span class='op'>=</span> <span class='va'>eval_jac_g0</span>,</span>
<span class='r-in'>                opts <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='st'>"algorithm"</span><span class='op'>=</span><span class='st'>"NLOPT_LD_MMA"</span><span class='op'>)</span>,</span>
<span class='r-in'>                a <span class='op'>=</span> <span class='va'>a</span>,</span>
<span class='r-in'>                b <span class='op'>=</span> <span class='va'>b</span> <span class='op'>)</span></span>
<span class='r-wrn co'><span class='r-pr'>#&gt;</span> <span class='warning'>Warning: </span>No termination criterium specified, using default (relative x-tolerance = 1e-04)</span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span> <span class='va'>res0</span> <span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Call:</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> nloptr(x0 = c(1.234, 5.678), eval_f = eval_f0, eval_grad_f = eval_grad_f0, </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>     lb = c(-Inf, 0), ub = c(Inf, Inf), eval_g_ineq = eval_g0, </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>     eval_jac_g_ineq = eval_jac_g0, opts = list(algorithm = "NLOPT_LD_MMA"), </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>     a = a, b = b)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Minimization using NLopt version 2.7.0 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> NLopt solver status: 4 ( NLOPT_XTOL_REACHED: Optimization stopped because </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> xtol_rel or xtol_abs (above) was reached. )</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Number of Iterations....: 11 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Termination conditions:  relative x-tolerance = 1e-04 (DEFAULT) </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Number of inequality constraints:  2 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Number of equality constraints:    0 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Optimal value of objective function:  0.54433104762009 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Optimal value of controls: 0.3333333 0.2962963</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Solve using NLOPT_LN_COBYLA without gradient information</span></span>
<span class='r-in'><span class='va'>res1</span> <span class='op'>&lt;-</span> <span class='fu'>nloptr</span><span class='op'>(</span> x0<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1.234</span>,<span class='fl'>5.678</span><span class='op'>)</span>,</span>
<span class='r-in'>                eval_f<span class='op'>=</span><span class='va'>eval_f0</span>,</span>
<span class='r-in'>                lb <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='cn'>Inf</span>,<span class='fl'>0</span><span class='op'>)</span>,</span>
<span class='r-in'>                ub <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>Inf</span>,<span class='cn'>Inf</span><span class='op'>)</span>,</span>
<span class='r-in'>                eval_g_ineq <span class='op'>=</span> <span class='va'>eval_g0</span>,</span>
<span class='r-in'>                opts <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='st'>"algorithm"</span><span class='op'>=</span><span class='st'>"NLOPT_LN_COBYLA"</span><span class='op'>)</span>,</span>
<span class='r-in'>                a <span class='op'>=</span> <span class='va'>a</span>,</span>
<span class='r-in'>                b <span class='op'>=</span> <span class='va'>b</span> <span class='op'>)</span></span>
<span class='r-wrn co'><span class='r-pr'>#&gt;</span> <span class='warning'>Warning: </span>No termination criterium specified, using default (relative x-tolerance = 1e-04)</span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span> <span class='va'>res1</span> <span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Call:</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> nloptr(x0 = c(1.234, 5.678), eval_f = eval_f0, lb = c(-Inf, 0), </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>     ub = c(Inf, Inf), eval_g_ineq = eval_g0, opts = list(algorithm = "NLOPT_LN_COBYLA"), </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>     a = a, b = b)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Minimization using NLopt version 2.7.0 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> NLopt solver status: 4 ( NLOPT_XTOL_REACHED: Optimization stopped because </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> xtol_rel or xtol_abs (above) was reached. )</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Number of Iterations....: 31 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Termination conditions:  relative x-tolerance = 1e-04 (DEFAULT) </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Number of inequality constraints:  2 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Number of equality constraints:    0 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Optimal value of objective function:  0.544242301658176 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Optimal value of controls: 0.3333292 0.2961997</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-in'></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Solve using NLOPT_LD_MMA with gradient information in objective function</span></span>
<span class='r-in'><span class='va'>res2</span> <span class='op'>&lt;-</span> <span class='fu'>nloptr</span><span class='op'>(</span> x0<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1.234</span>,<span class='fl'>5.678</span><span class='op'>)</span>,</span>
<span class='r-in'>                eval_f<span class='op'>=</span><span class='va'>eval_f1</span>,</span>
<span class='r-in'>                lb <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='cn'>Inf</span>,<span class='fl'>0</span><span class='op'>)</span>,</span>
<span class='r-in'>                ub <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>Inf</span>,<span class='cn'>Inf</span><span class='op'>)</span>,</span>
<span class='r-in'>                eval_g_ineq <span class='op'>=</span> <span class='va'>eval_g1</span>,</span>
<span class='r-in'>                opts <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='st'>"algorithm"</span><span class='op'>=</span><span class='st'>"NLOPT_LD_MMA"</span>, <span class='st'>"check_derivatives"</span><span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>,</span>
<span class='r-in'>                a <span class='op'>=</span> <span class='va'>a</span>,</span>
<span class='r-in'>                b <span class='op'>=</span> <span class='va'>b</span> <span class='op'>)</span></span>
<span class='r-wrn co'><span class='r-pr'>#&gt;</span> <span class='warning'>Warning: </span>No termination criterium specified, using default (relative x-tolerance = 1e-04)</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Checking gradients of objective function.</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Derivative checker results: 0 error(s) detected.</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span>   eval_grad_f[ 1 ] = 0.000000e+00 ~ 0.000000e+00   [0.000000e+00]</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span>   eval_grad_f[ 2 ] = 2.098323e-01 ~ 2.098323e-01   [1.422937e-09]</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Checking gradients of inequality constraints.</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Derivative checker results: 0 error(s) detected.</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span>   eval_jac_g_ineq[ 1, 1 ] =  3.654614e+01 ~  3.654614e+01   [1.667794e-08]</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span>   eval_jac_g_ineq[ 2, 1 ] = -1.642680e-01 ~ -1.642680e-01   [2.103453e-07]</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span>   eval_jac_g_ineq[ 1, 2 ] = -1.000000e+00 ~ -1.000000e+00   [0.000000e+00]</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span>   eval_jac_g_ineq[ 2, 2 ] = -1.000000e+00 ~ -1.000000e+00   [0.000000e+00]</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span> <span class='va'>res2</span> <span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Call:</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> nloptr(x0 = c(1.234, 5.678), eval_f = eval_f1, lb = c(-Inf, 0), </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>     ub = c(Inf, Inf), eval_g_ineq = eval_g1, opts = list(algorithm = "NLOPT_LD_MMA", </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>         check_derivatives = TRUE), a = a, b = b)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Minimization using NLopt version 2.7.0 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> NLopt solver status: 4 ( NLOPT_XTOL_REACHED: Optimization stopped because </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> xtol_rel or xtol_abs (above) was reached. )</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Number of Iterations....: 11 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Termination conditions:  relative x-tolerance = 1e-04 (DEFAULT) </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Number of inequality constraints:  2 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Number of equality constraints:    0 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Optimal value of objective function:  0.54433104762009 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Optimal value of controls: 0.3333333 0.2962963</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-in'></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jelmer Ypma, Steven G. Johnson, Aymeric Stamm.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


